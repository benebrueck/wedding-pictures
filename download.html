<!DOCTYPE html>
<html>
<head>
  <title>Meine Firebase App</title>
</head>
<body>
  <!-- Hier bindest du die Firebase-SDKs ein -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>

  <script>
    // Hier fügst du deine Firebase-Konfiguration ein
    const firebaseConfig = {
        apiKey: "AIzaSyBvUPWZ96ZHHrzvPa2N-XAnFF6ZxboE-w4",
        authDomain: "wedding-picture-app.firebaseapp.com",
        projectId: "wedding-picture-app",
        storageBucket: "wedding-picture-app.appspot.com",
        messagingSenderId: "681171184568",
        appId: "1:681171184568:web:0596738f71b18e17a0bd4d"
    };
    // Initialisiere Firebase
    firebase.initializeApp(firebaseConfig);

    // Funktion zum Herunterladen aller Dateien aus einem bestimmten Ordner
    function downloadFilesFromFirebase(folderPath) {
      const storageRef = firebase.storage().ref(folderPath);

      storageRef
        .listAll()
        .then((res) => {
          res.items.forEach((itemRef) => {
            // Extrahiere den Dateinamen und füge .jpg-Endung hinzu
            const filename = itemRef.name.replace(folderPath,"") + ".jpg";

            // Erstelle einen unsichtbaren Link und klicke ihn automatisch an,
            // um den Dateidownload auszulösen.
            const downloadLink = document.createElement("a");
            itemRef.getDownloadURL().then((downloadURL) => {
              downloadLink.href = downloadURL;
              downloadLink.download = filename;
              document.body.appendChild(downloadLink);
              downloadLink.click();
              document.body.removeChild(downloadLink);
            });

            console.log(`Herunterladen von ${filename}...`);
          });
        })
        .catch((error) => {
          console.error("Fehler beim Abrufen der Dateiliste:", error);
        });
    }

    // Funktion, die aufgerufen wird, wenn der Button geklickt wird
    function onDownloadButtonClick() {
      // Hier kannst du den Pfad zum Firebase-Ordner angeben, den du herunterladen möchtest
      const firebaseFolderPath = "test1";
      downloadFilesFromFirebase(firebaseFolderPath);
    }
  </script>

  <!-- Der Button, der die Dateien herunterlädt -->
  <button onclick="onDownloadButtonClick()">Dateien herunterladen</button>

  <a href="https://www.w3schools.com/" download>
    <img src="https://www.w3schools.com/" alt="W3Schools">
  </a>
</body>
</html>

    
    