{"ast":null,"code":"import _slicedToArray from\"/Users/benediktbrueck/Documents/GitHub/wedding-pictures 10.39.07/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React,{useState,useRef}from\"react\";import{storage}from\"./firebase\";import{ref,uploadBytes}from\"firebase/storage\";import{Camera}from\"react-camera-pro\";// import { v1 } from \"uuid\";\nimport{format}from\"date-fns\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Component=function Component(){function base64ToFile(base64String,fileName){// Remove the data:image/<file-type>;base64, prefix\nvar base64Data=base64String.replace(/^data:image\\/\\w+;base64,/,'');// Convert the base64 string to binary data\nvar binaryData=atob(base64Data);// Create an ArrayBuffer from the binary data\nvar buffer=new ArrayBuffer(binaryData.length);var view=new Uint8Array(buffer);for(var i=0;i<binaryData.length;i++){view[i]=binaryData.charCodeAt(i);}// Create a Blob from the ArrayBuffer\nvar blob=new Blob([buffer],{type:'image/jpeg'});// Change the 'image/jpeg' to the appropriate file type\n// Create a File from the Blob\nvar file=new File([blob],fileName,{type:blob.type});return file;}var camera=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var uploadImage=function uploadImage(){// if (image==null) return;\nsetImage(camera.current.takePhoto());// Speicherort\nvar time=format(new Date(),'ddMMyyhhmmss');var rand=Math.floor(1000+9000*Math.random());var fileend=\".jpeg\";var imageRef=ref(storage,\"test1/\".concat(time+rand+fileend));uploadBytes(imageRef,base64ToFile(image,\"bild\"));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Camera,{ref:camera}),/*#__PURE__*/_jsx(\"button\",{onClick:uploadImage,className:\"dot\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return camera.current.switchCamera();}})]});};export default Component;","map":{"version":3,"names":["React","useState","useRef","storage","ref","uploadBytes","Camera","format","jsx","_jsx","jsxs","_jsxs","Component","base64ToFile","base64String","fileName","base64Data","replace","binaryData","atob","buffer","ArrayBuffer","length","view","Uint8Array","i","charCodeAt","blob","Blob","type","file","File","camera","_useState","_useState2","_slicedToArray","image","setImage","uploadImage","current","takePhoto","time","Date","rand","Math","floor","random","fileend","imageRef","concat","children","onClick","className","switchCamera"],"sources":["/Users/benediktbrueck/Documents/GitHub/wedding-pictures 10.39.07/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useState, useRef } from \"react\";\nimport { storage } from \"./firebase\";\nimport { ref, uploadBytes} from \"firebase/storage\";\nimport { Camera } from \"react-camera-pro\";\n// import { v1 } from \"uuid\";\nimport { format } from \"date-fns\"\n\nconst Component = () => {\n  function base64ToFile(base64String, fileName) {\n    // Remove the data:image/<file-type>;base64, prefix\n    const base64Data = base64String.replace(/^data:image\\/\\w+;base64,/, '');\n  \n    // Convert the base64 string to binary data\n    const binaryData = atob(base64Data);\n  \n    // Create an ArrayBuffer from the binary data\n    const buffer = new ArrayBuffer(binaryData.length);\n    const view = new Uint8Array(buffer);\n    for (let i = 0; i < binaryData.length; i++) {\n      view[i] = binaryData.charCodeAt(i);\n    }\n  \n    // Create a Blob from the ArrayBuffer\n    const blob = new Blob([buffer], { type: 'image/jpeg' }); // Change the 'image/jpeg' to the appropriate file type\n  \n    // Create a File from the Blob\n    const file = new File([blob], fileName, { type: blob.type });\n  \n    return file;\n  }\n\n  const camera = useRef(null);\n  const [image, setImage] = useState(null);\n\n  const uploadImage = () =>{\n    // if (image==null) return;\n    setImage(camera.current.takePhoto())\n    // Speicherort\n    \n    const time = format(new Date(),'ddMMyyhhmmss')\n    \n    const rand = Math.floor(1000 + 9000 * Math.random());\n    const fileend = \".jpeg\"\n    const imageRef = ref(storage,`test1/${ time + rand + fileend}`);\n    uploadBytes(imageRef,base64ToFile(image,\"bild\"))\n  }\n\n  return (\n    <div>\n      <Camera ref={camera} />\n      <button onClick={uploadImage} className='dot'></button>\n      <button onClick={()=> camera.current.switchCamera()}></button>\n    </div>\n  );\n}\n\nexport default Component;  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}